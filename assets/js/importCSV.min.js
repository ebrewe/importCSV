(function(){(function(e){var t,n;n=function(){return console.log("private")};t={init:function(n){var r={url:"",language:"EN",callback:t.printObject,thClasses:"",hideColumns:"",mergeColumns:"",theadClasses:"",excerpts:50,links:[],linkColumn:"",el:"",responsiveHide:"",excerptCallback:t.excerptCallback,debug:false};return this.each(function(){var i,s;i=e(this);var o=e.extend(r,n);o.el=i;e(o.el).append('<div class="loading-div"></div>');var u=[];for(var a in o.hideColumns){var f=o.hideColumns[a]-1;u[f]=true}o.hideColumns=u;var l=[];for(var a in o.links){var f=o.links[a]-1;l[f]=true}o.links=l;if(o.links&&!o.linkColumn){console.log("links require a link column for reference");o.links=undefined}if(o.linkColumn){o.linkColumn-=1}o.mergeColumns=t.mergeArray(o.mergeColumns);if(o.dataTables){if(typeof o.dataTables!=="function"){console.log("dataTables must be a function");o.dataTables=false}}if(!o.url){return console.log("importCSV requires - interestingly enough -a CSV file to import.")}if(o.excerpts&&o.excerpts<40){o.excerpts=40}t.import(o)})},"import":function(n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m;r=n.el;i=n.url;s=n.callback;o=n.excerpts;u=n.thClasses;a=n.theadClasses;f=n.dataTables;l=n.responsiveHide;c=n.excerptCallback;h=n.hideColumns;p=n.mergeColumns;d=n.links;v=n.linkColumn;m=n.changeTitles;var g;if(s==null){s=false}g=e.get(i);return g.success(function(e){var i,g;i=t.csvToArray(e);g=t.arrayToJson(i);if(n.debug)console.log(g);if(s){s(r,g,{thClasses:u,theadClasses:a,excerpts:o,hides:h,merges:p,links:d,linkCol:v});t.addResponsiveHides(r,l);t.addDataClasses(r,u);t.addExcerpts(r,o);t.changeTitles(r,m);if(f){f.apply()}if(o){if(c&&typeof c=="function"){c(r)}}}else{return"successful"}})},printObject:function(t,n,r){var i=[],s=[],o=[],u="",a=n["titles"],f=n["preformTitles"],l=n["data"];var c,h,p,d,v,m,g;c=r.thClasses?r.thClasses:0;h=r.theadClasses?r.theadClasses:0;p=r.excerpts?r.excerpts:0;d=r.hides?r.hides:0;v=r.merges?r.merges:0;m=r.links?r.links:0;g=r.linkCol?r.linkCol:0;for(var y in v){if(typeof v[y]=="object"){for(var b in v[y])s[v[y][b]]=y}else{s[v[y]]=y}}for(var y in a){if(!d[y])i.push(y)}u+='<thead class="';u+=h.length>1?h:"";u+='">';u+="<tr>";for(var y in a){if(!s[y]&&!d[y]){u+='<th class="col-'+a[y]+'">';u+=f[y];u+="</th>"}}u+="</tr></thead>";for(var w=0,E=l.length;w<E;w++){var S=parseInt(w)+1;u+='<tr class="row-'+S+'">';for(var y in a){if(!d[y]&&!s[y]){u+="<td>";if(m){if(m[y]){u+='<a href="'+l[w][a[g]]+'">'}}u+=l[w][a[y]];if(m){if(m[y])u+="</a>"}if(v[y]){if(typeof v[y]=="object"){for(var x in v[y]){u+='<span class="merged-col-'+a[v[y][x]]+'">'+l[w][a[v[y][x]]]+"</span>"}}else{u+='<span class="merged-col-'+a[v[y]]+'">'+l[w][a[v[y]]]+"</span>"}}u+="</td>"}}u+="</tr>"}u+="<tfoot>";for(var y in a){if(!s[y]&&!d[y]){u+='<th class="col-'+a[y]+'">';u+=o[y]?o[y]:f[y];u+="</th>"}}u+="</tfoot>";if(e(t).find(".loading-div").length>0)e(t).find(".loading-div").remove();e(t).append(u)},addDataClasses:function(t,n){for(var r in n){if(n[r]&&n[r].length>0){var i=parseInt(r)+1;e(t).find("th:nth-child("+i+") ").attr("data-class",n[r])}}},addExcerpts:function(n,r){e(n).find("td").each(function(){if(e(this).find("a").length<1)e(this).html(t.getExcerpt(e(this).text(),r,true))})},changeTitles:function(t,n){if(n){for(var r=0,i=n.length;r<i;r++){var s=r+1;e("thead th:nth-child("+s+")").text(n[r]);e("tfoot th:nth-child("+s+")").text(n[r])}}else{return false}},mergeArray:function(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i=parseInt(e[n][0])-1;var s=e[n][1];if(typeof s=="object"){for(var o in s){s[o]=parseInt(s[o])-1}t[i]=s}else{t[i]=parseInt(s)-1}}return t},addResponsiveHides:function(t,n){for(var r in n){if(n[r]&&n[r].length>0){var i=parseInt(r)+1;e(t).find("th:nth-child("+i+") ").attr("data-hide",n[r])}}},arrayToJson:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m;s=e[0];f=[];a=[];r=[];for(l=c=0,d=s.length;c<d;l=++c){i=s[l];f.push(i);o=i.replace(/[^\w\s]/gi,"");o=o.replace(/\s/g,"_");o=o.replace(/__/g,"_");a.push(o.toLowerCase())}for(i=h=1,v=e.length;1<=v?h<v:h>v;i=1<=v?++h:--h){if(e[i].length==1&&e[i][0].length<1)continue;u=e[i];t={};for(n=p=0,m=u.length;0<=m?p<=m:p>=m;n=0<=m?++p:--p){t[a[n]]=u[n]}r.push(t)}return{data:r,preformTitles:f,titles:a}},getExcerpt:function(e,t,n){var r,i,s,o;if(t==null){t=100}if(n==null){n=false}o=e.substr(0,t);r=o.lastIndexOf(" ");if(t>30&&r>t-20){i=e.substr(0,r);s=e.substr(r+1,e.length);if(n){i+=' <a href class="read-more">Read more...</a>'}return'<span class="excerpt">'+i+'</span><span class="remaining-text">'+s+'<a href class="hide-content hidden">Hide information</a></span>'}return"<span>"+e+"</span>"},csvToArray:function(e,t){t=t||",";var n=new RegExp("(\\"+t+"|\\r?\\n|\\r|^)"+'(?:"([^"]*(?:""[^"]*)*)"|'+'([^"\\'+t+"\\r\\n]*))","gi");var r=[[]];var i=null;while(i=n.exec(e)){var s=i[1];if(s.length&&s!=t){r.push([])}if(i[2]){var o=i[2].replace(new RegExp('""',"g"),'"')}else{var o=i[3]}r[r.length-1].push(o)}return r},excerptCallback:function(t){e(t).find("td").on("click","a.read-more, a.hide-content",function(t){t=t?t:window.event;t.preventDefault();t.stopPropagation();e(this).closest("td").find("a.read-more, a.hide-content").toggleClass("hidden");e(this).closest("td").find(".remaining-text").fadeToggle()})}};e.fn.importCSV=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{return e.error("jQuery.importCSV: Method "+n+" does not exist on jQuery.importCSV")}}})(jQuery)}).call(this)